-- 1) Load thư viện WazureV1 từ GitHub
local WazureV1 = loadstring(game:HttpGet(
    "https://raw.githubusercontent.com/0xteru/uilibrary/refs/heads/main/Wazure%20V1%20Lib/Source.lua", true
))()

-- 2) Khởi tạo GUI
local WazureGui = WazureV1:Start({
    Name            = "W-azure",
    ["Logo Player"] = "rbxassetid://18243105495",
    ["Name Player"] = "SongDaiThanhHuyenTh",
    ["Tab Width"]   = 120,
    Color           = Color3.fromRGB(6, 141, 234),
    ["Custom Toggle"] = false,
    ["Save Config"] = { Folder = "W-azure", ["Name Config"] = "Config" },
    ["CloseCallBack"] = function()
        WazureV1:Notify({
            Title   = "DogTanny",
            Content = "Closed UI!",
            Logo    = "rbxassetid://18289959127",
            Time    = 1,
            Delay   = 5,
        })
    end
})

-- services
local Players           = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace         = game:GetService("Workspace")
local LocalPlayer       = Players.LocalPlayer

-- 3) Tạo tất cả các Tab
local tabNames = {
    "Main","Sub Farm","Fruits - Raid","Status","Server","PvP",
    "Player","Sea Event","Leviathan","Prehistoric Event",
    "Webhook","Music","Setting","OneClick","OneClickDebug"
}
local Tabs = {}
for _, name in ipairs(tabNames) do
    Tabs[name] = WazureGui:MakeTab(name)
end

-- (Các tab khác như Sub Farm, Fruits - Raid, v.v... giữ nguyên hoặc build tương tự)

-- 11) Leviathan: Auto điều khiển thuyền Beast Hunter và tìm Gate
-- Leviathan Tab
local t = Tabs["Leviathan"]
t:MakeSeperator("=== Auto Find Leviathan ===")
:Set("Tự động lái thuyền Beast Hunter, bay Y=40, boost 350%, tìm Gate")

-- Các biến
local bp, conn, running, boat

-- Hàm Notify
local function notif(text)
    WazureV1:Notify({
        Title = "Leviathan",
        Content = text,
        Logo = "rbxassetid://18289959127",
        Time = 2
    })
end

-- Hàm Start
local function startAuto()
    boat = workspace:FindFirstChild("Beast Hunter", true)
    if not boat or not boat.PrimaryPart then
        notif("Không tìm thấy 'Beast Hunter'!")
        return
    end

    bp = Instance.new("BodyPosition", boat.PrimaryPart)
    bp.MaxForce = Vector3.new(1e5, 1e5, 1e5)
    bp.Position = boat.PrimaryPart.Position + Vector3.new(0,40,0)

    for _, p in ipairs(boat:GetDescendants()) do
        if p:IsA("BasePart") then
            p.CanCollide = false
        end
    end

    running = true

    task.spawn(function()
        while running and bp and boat.PrimaryPart do
            local pos = boat.PrimaryPart.Position
            bp.Position = Vector3.new(
                pos.X + math.random(-50,50),
                40,
                pos.Z + math.random(-50,50)
            )
            task.wait(3)
        end
    end)

    conn = workspace.ChildAdded:Connect(function(c)
        if running and c.Name == "LeviathanGate" then
            notif("Gate xuất hiện! Đang di chuyển...")
            local gatePart = c.PrimaryPart or c:FindFirstChildWhichIsA("BasePart")
            if gatePart then
                while running and gatePart and boat.PrimaryPart do
                    bp.Position = gatePart.Position + Vector3.new(0,10,0)
                    if (boat.PrimaryPart.Position - gatePart.Position).Magnitude < 20 then break end
                    task.wait(0.5)
                end
            end
        end
    end)

    notif("Auto Leviathan bật!")
end

-- Hàm Stop
local function stopAuto()
    running = false
    if conn then conn:Disconnect() conn = nil end
    if bp then bp:Destroy() bp = nil end
    if boat then
        for _, p in ipairs(boat:GetDescendants()) do
            if p:IsA("BasePart") then
                p.CanCollide = true
            end
        end
    end
    notif("Auto Leviathan tắt!")
end

-- Tạo Toggle
t:MakeToggle("Auto Find Leviathan", {
    Title   = "Bật/Tắt Auto Find",
    Content = "Tự động tìm Gate & lái thuyền",
    Default = false,
    Callback = function(on)
        if on then
            startAuto()
        else
            stopAuto()
        end
    end
})
