-- Đảm bảo game đã load hoàn toàn
if not game:IsLoaded() then
    game.Loaded:Wait()
end

-- Lấy các dịch vụ cần thiết
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")

local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui", 5)
local Remotes = ReplicatedStorage:WaitForChild("Remotes", 5)
local CommF = Remotes:WaitForChild("CommF_", 5)
local MainGui = PlayerGui:WaitForChild("Main", 5)

-- Giới hạn thông báo
local lastNotificationTime = 0
local notificationCooldown = 10
if tick() - lastNotificationTime >= notificationCooldown then
    lastNotificationTime = tick()
end

-- Vô hiệu hóa hiệu ứng chết và hồi sinh
local EffectContainer = ReplicatedStorage:FindFirstChild("Effect") and ReplicatedStorage.Effect:FindFirstChild("Container")
if EffectContainer then
    for _, name in ipairs({"Death", "Respawn"}) do
        local obj = EffectContainer:FindFirstChild(name)
        if obj then
            local success, result = pcall(require, obj)
            if success and type(result) == "function" then
                hookfunction(result, function() end)
            end
        end
    end
end

-- Vô hiệu hóa hiển thị NPC hướng dẫn
local GuideModule = ReplicatedStorage:FindFirstChild("GuideModule")
if GuideModule then
    local success, module = pcall(require, GuideModule)
    if success and module and type(module.ChangeDisplayedNPC) == "function" then
        hookfunction(module.ChangeDisplayedNPC, function() end)
    end
end

-- Dừng hiệu ứng rung camera
local Util = ReplicatedStorage:WaitForChild("Util", 5)
if Util then
    local CameraShaker = Util:FindFirstChild("CameraShaker")
    if CameraShaker then
        local success, module = pcall(require, CameraShaker)
        if success and module and type(module.Stop) == "function" then
            module:Stop()
        end
    end
end

-- Xác định thế giới hiện tại
local placeId = game.PlaceId
local World1, World2, World3
if placeId == 2753915549 then
    World1 = true
elseif placeId == 4442272183 then
    World2 = true
elseif placeId == 7449423635 then
    World3 = true
else
    Player:Kick("Unsupported Game")
end

-- Tải thư viện UI
local WazureV1 = loadstring(game:HttpGet("https://raw.githubusercontent.com/0xteru/uilibrary/refs/heads/main/Wazure%20V1%20Lib/Source.lua"))()

-- Khởi tạo giao diện chính
local WazureGui = WazureV1:Start({
    Name = "W-azure",
    ["Logo Player"] = "rbxassetid://18243105495",
    ["Name Player"] = "@SongDaiThanhHuyenTh",
    ["Tab Width"] = 120,
    Color = Color3.fromRGB(6, 141, 234),
    ["Custom Toggle"] = false,
    ["Save Config"] = {
        Folder = "W-azure",
        ["Name Config"] = "Config",
    },
    ["CloseCallBack"] = function()
        WazureV1:Notify({
            Title = "DogTanny",
            Content = "Closed UI!",
            Logo = "rbxassetid://18289959127",
            Time = 1,
            Delay = 5,
        })
    end
})

-- Tạo tab và toggle
local OneClick = WazureGui:MakeTab("OneClick")
OneClick:MakeToggle("OneClick ( All In One )", {
    Title = "OneClick Start ? ( All In One )",
    Content = "Auto Farm Lv + Buy GHM + CDK + Skull Guitar?",
    Default = false,
    Callback = function(isOn)
        -- Logic xử lý khi bật toggle
        if isOn then
            print("Bắt đầu auto...")
        else
            print("Dừng auto...")
        end
    end
})
